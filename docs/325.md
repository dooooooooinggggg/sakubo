# 5章 シェルコード

2章などで，

```c
char shellcode[] =
	"\x31\xc0\x31\xdb\x31\xc9\x99\xb0\xa4\xcd\x80\x6a\x0b\x58\x51\x68"
	"\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x51\x89\xe2\x53\x89"
	"\xe1\xcd\x80";
```

このように，注入したシェルコード．2章では謎のバイト列として扱ったが，今回はそこらへんをやる．なぜこのコードをプログラム中に注入し制御を移すことでシェルが実行できるのか．

例として示されたのは，以下の2種類

1. ローカル環境でシェルを起動
2. リモート環境としてポートをオープンする

シェルコードは，攻撃対象のアーキテクチャに沿ったアセンブリ言語で記載されている．

## アセンブリ言語 vs C言語

（何度もやっている話だが）例えばprintfなど，標準出力をする関数はプラットフォームを問わずに記述することが可能．
これらはコンパイル時に実際にシステムコールを呼ぶような実行ファイルにコンパイルされる．その動きを同じソースコードで，LinuxとMacで比較してみる．

```c
#include <stdio.h>

int main()
{
    printf("Hello world!!\n");
    return 0;
}
```
